# SRS-RecSplit in Rust
Implementation of SRS-RecSplit---a [minimal perfect hash function](https://en.wikipedia.org/wiki/Perfect_hash_function#Minimal_perfect_hash_function)---in Rust.
SRS-RecSplit uses Symbiotic Random Search and the [RecSplit](https://arxiv.org/abs/1910.06416) idea to construct a minimal perfect hash function.

| ⚠️   | Not yet production ready! |
| --- | ------------------------- |

## Usage
```rust
use srs_rs_rs::SrsRecSplit;

let overhead = 0.01;
let mphf = SrsRecSplit::new([&"hello", &"world", &"42", &"mphf"], overhead);
println!("{}, {}", mphf.query(&"hello"), mphf.query(&"world"));
```

## Runtime
- Expected construction time (`SrsRecSplit::new`) in O(n^3/2 log n / overhead) where `n` is the size of the input set.
- Query time (`SrsRecSplit::query`) in O(log n).

Linear construction and constant query time using bucketization are planned.


## C++ Bindings
This crate includes C++ bindings for SrsMPHF generated by [cxx](https://cxx.rs/index.html).
These can be generated using 
- `cxxbridge .\src\cpp_bindings.rs -o srs_recsplit.hpp` and
- `cxxbridge .\src\cpp_bindings.rs -o srs_recsplit.cpp`

and need to be linked to `target/release/libsrs-rs-rs.a` generated by `cargo build --release -F cpp_binds`

`cxxbridge` can be installed using `cargo install cxxbridge`


Afterward, SrsMphf can be used the following:
```c++
#include "srs_recsplit.hpp"
#include <iostream>
#include <vector>
#include <string>

int main()
{
    std::vector<std::string> vec{"hello", "world"};

    auto mphf = srs_rs_rs::constructSrsRecSplit(vec, 0.001);

    std::cout << "size: " << mphf->getBits() << ", bit per key: " << mphf->getBitsPerKey() << ", hashes: " 
        << mphf->query("hello") << " " << mphf->query("world") << std::endl;
}

```
